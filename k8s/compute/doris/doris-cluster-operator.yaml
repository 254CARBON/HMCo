apiVersion: doris.selectdb.com/v1
kind: DorisCluster
metadata:
  name: doris-cluster
  namespace: doris-analytics
  labels:
    app: doris
    component: analytical-database
spec:
  # Frontend (FE) specification
  feSpec:
    replicas: 1
    image: apache/doris:fe-3.0.8
    limits:
      cpu: 2
      memory: 8Gi
    requests:
      cpu: 1
      memory: 4Gi
    persistentVolumes:
    - mountPath: /opt/apache-doris/fe/doris-meta
      name: meta
      persistentVolumeClaimSpec:
        storageClassName: local-path
        accessModes:
        - ReadWriteOnce
        resources:
          requests:
            storage: 20Gi
    service:
      type: ClusterIP
  
  # Backend (BE) specification
  beSpec:
    replicas: 1
    image: apache/doris:be-3.0.8
    limits:
      cpu: 4
      memory: 16Gi
    requests:
      cpu: 2
      memory: 8Gi
    persistentVolumes:
    - mountPath: /opt/apache-doris/be/storage
      name: storage
      persistentVolumeClaimSpec:
        storageClassName: local-path
        accessModes:
        - ReadWriteOnce
        resources:
          requests:
            storage: 100Gi
    service:
      type: ClusterIP
  
  # Administrative configuration
  adminUser:
    name: admin
    password: admin@254carbon  # Change this in production!

