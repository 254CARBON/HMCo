## Alertmanager chart values
# Opinionated base config with example routes and receivers.

alertmanager:
  config:
    global:
      resolve_timeout: 5m
    route:
      group_by: ['alertname', 'cluster', 'service', 'namespace']
      group_wait: 30s
      group_interval: 5m
      repeat_interval: 12h
      receiver: 'team-email'
      routes:
        - match:
            severity: critical
          receiver: 'critical-pagerduty'
        - match:
            severity: warning
          receiver: 'team-email'
    receivers:
      - name: 'team-email'
        email_configs:
          - to: 'ops@254carbon.com'
            from: 'alertmanager@254carbon.com'
            smarthost: 'smtp.example.com:587'
            auth_username: 'alertmanager@254carbon.com'
            auth_password: 'REPLACE_WITH_SECRET_FROM_VAULT'
      - name: 'critical-pagerduty'
        pagerduty_configs:
          - routing_key: 'REPLACE_WITH_PD_KEY'
  alertmanagerSpec:
    replicas: 2
    storage:
      volumeClaimTemplate:
        spec:
          storageClassName: local-storage-standard
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 5Gi

