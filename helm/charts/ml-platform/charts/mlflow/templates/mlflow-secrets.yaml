{{- if not (and .Values.global.vault .Values.global.vault.enabled) }}
apiVersion: v1
kind: Secret
metadata:
  name: mlflow-backend-secret
  namespace: data-platform
  labels:
    app: mlflow
    component: backend
type: Opaque
stringData:
  # PostgreSQL connection credentials
  db_user: mlflow
  db_password: mlflow-secure-password-change-me
  db_host: postgres-shared-service.data-platform.svc.cluster.local
  db_port: "5432"
  db_name: mlflow
  
  # Backend URI (PostgreSQL)
  backend_store_uri: "postgresql://mlflow:mlflow-secure-password-change-me@postgres-shared-service.data-platform.svc.cluster.local:5432/mlflow"

---
apiVersion: v1
kind: Secret
metadata:
  name: mlflow-artifact-secret
  namespace: data-platform
  labels:
    app: mlflow
    component: artifact-storage
type: Opaque
stringData:
  # MinIO S3 credentials
  aws_access_key_id: minioadmin
  aws_secret_access_key: minioadmin
  
  # S3 endpoint (MinIO)
  s3_endpoint_url: "http://minio-service.data-platform.svc.cluster.local:9000"
  
  # Artifact URI (MinIO S3)
  artifact_root: "s3://mlflow-artifacts"
{{- end }}
