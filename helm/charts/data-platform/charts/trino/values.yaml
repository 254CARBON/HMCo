# Trino values
replicaCount:
  coordinator: 1
  worker: 1

image:
  repository: trinodb/trino
  tag: "438"
  pullPolicy: IfNotPresent

service:
  coordinator:
    type: ClusterIP
    port: 8080
  worker:
    type: ClusterIP
    port: 8080

ingress:
  enabled: true
  className: nginx
  hostname: trino.254carbon.com
  tls: true
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod

catalogs:
  - name: iceberg_catalog
    type: iceberg
    properties:
      iceberg.catalog.type: rest
      iceberg.rest-catalog.uri: http://iceberg-rest-catalog:8181
  - name: postgresql
    type: postgresql
    properties:
      connection-url: jdbc:postgresql://postgres-shared-service:5432/datahub
      connection-user: postgres

resources:
  coordinator:
    requests:
      cpu: 2000m
      memory: 8Gi
    limits:
      cpu: 4000m
      memory: 16Gi
  worker:
    requests:
      cpu: 4000m
      memory: 16Gi
    limits:
      cpu: 8000m
      memory: 32Gi

autoscaling:
  enabled: true
  worker:
    minReplicas: 1
    maxReplicas: 5
    targetCPUUtilizationPercentage: 75
    targetMemoryUtilizationPercentage: 85

# Query performance settings
config:
  query:
    max-memory: 50GB
    max-memory-per-node: 8GB
  task:
    max-worker-threads: 32
    min-drivers: 2


