# Example secret for Superset configuration secrets.
# Copy this file to superset-secrets.yaml, update the placeholder values,
# and apply it to the cluster **before** deploying Superset.
#
#   cp k8s/visualization/superset-secrets.example.yaml \
#      k8s/visualization/superset-secrets.yaml
#   # edit superset-secrets.yaml with real values
#   kubectl apply -f k8s/visualization/superset-secrets.yaml
#
# If you manage secrets via the Vault / External Secrets integration
# (recommended), mirror the key names defined below under the Vault path
# `secret/data-platform/superset`.

apiVersion: v1
kind: Secret
metadata:
  name: superset-secrets
  namespace: data-platform
  labels:
    app: superset
type: Opaque
stringData:
  # Superset Flask secret key (generate with: openssl rand -hex 32)
  SUPERSET_SECRET_KEY: "replace-with-generated-secret-key"

  # SQLAlchemy URI for Superset metadata database
  DATABASE_URI: "postgresql://superset_user:replace-with-password@postgres-shared-service:5432/superset"

  # Optional discrete database credentials (used by tooling/init)
  DATABASE_USERNAME: "superset_user"
  DATABASE_PASSWORD: "replace-with-password"

  # Optional: external analytics engines to register automatically
  SUPERSET_TRINO_URI: "trino://admin@trino-coordinator.data-platform:8080/iceberg/default?http_scheme=http"
  SUPERSET_CLICKHOUSE_URI: "clickhouse://default:replace-with-clickhouse-password@clickhouse-service.data-platform:9000/default"

  # Initial administrator account (skip-if-exists)
  ADMIN_USERNAME: "admin"
  ADMIN_PASSWORD: "replace-with-strong-password"
  ADMIN_EMAIL: "admin@example.com"
  ADMIN_FIRSTNAME: "Superset"
  ADMIN_LASTNAME: "Admin"
